from database import Base, SessionLocal
from models.user_model import User
from models.expense_model import Expense
from sqlalchemy.orm import joinedload

class UserService():
    @staticmethod
    def get_user_by_category(category: str):
        with SessionLocal() as db:
            users = (
                db.query(User)
                .join(Expense)  
                .filter(Expense.category == category.upper())  
                .options(joinedload(User.expenses)) 
                .all()
            )
        return users if users else None
    
    
    __all__ = ["UserService"]